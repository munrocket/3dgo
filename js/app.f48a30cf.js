(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)i=r[d],a[i]&&p.push(a[i][0]),a[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},o=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"293a":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-wrapper",{attrs:{title:"Chat"}},[t._l(t.messages,function(e,s){return n("p",{key:s,ref:"msg_".concat(s),refInFor:!0},[n("span",{staticClass:"has-text-weight-semibold"},[t._v("\n      "+t._s(e.player)+":\n    ")]),t._v(" "+t._s(e.text)+"\n  ")])}),n("button",{staticClass:"button is-primary",on:{click:function(e){t.sendMsg()}}},[t._v("Send")]),n("div",{staticClass:"new-msg"},[n("input",{staticClass:"input",attrs:{id:"new-msg",type:"text",placeholder:"type message here..",required:""}})])],2)},a=[],o=n("7fa4"),i=n("29b2"),r={name:"Chat",components:{ListWrapper:o["a"]},data(){return{messages:[]}},mounted(){i["a"].on("onInvite",(t,e)=>{store.opponentId=t,e(null,{assept:!0})}),i["a"].on("newGame",t=>{store.opponentId&&router.push({name:"PvP"})}),i["a"].on("message",t=>{"global"==t.roomName&&this.messages.push({player:t.userId,text:t.message})})},methods:{sendMsg(){i["a"].emit("global",{roomName:"global",message:document.getElementById("new-msg").value})}}},l=r,c=(n("4f3c"),n("2877")),u=Object(c["a"])(l,s,a,!1,null,"143dc06c",null);u.options.__file="Chat.vue";e["default"]=u.exports},"29b2":function(t,e,n){"use strict";var s=n("8055"),a=n.n(s);e["a"]=a()("http://localhost:3000")},3874:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-wrapper",{attrs:{title:"This is PVP"}},[t._l(t.messages,function(e){return n("p",{key:e.id,ref:"msg_".concat(e.id),refInFor:!0},[n("span",{staticClass:"has-text-weight-semibold"},[t._v("\n      "+t._s(e.player)+":\n    ")]),t._v(" "+t._s(e.text)+"\n  ")])}),n("button",{staticClass:"button is-primary",on:{click:function(e){t.sendMsg()}}},[t._v("Send")]),n("div",{staticClass:"new-msg"},[n("input",{staticClass:"input",attrs:{id:"new-msg",type:"text",placeholder:"type message here..",required:""}})])],2)},a=[],o=n("7fa4"),i=n("29b2"),r=n("da6f"),l={name:"PvP",components:{ListWrapper:o["a"]},computed:{title(){return"PVP:"+r["a"].myId+"-"+r["a"].opponentId}},data(){return{messages:[]}},mounted(){i["a"].emit("join",{roomName:"pvp"},t=>{console.log(t)})},methods:{sendMsg(){i["a"].emit("pvp",{roomName:"pvp",message:"test"})}}},c=l,u=n("2877"),d=Object(u["a"])(c,s,a,!1,null,null,null);d.options.__file="PvP.vue";e["default"]=d.exports},"4f3c":function(t,e,n){"use strict";var s=n("7edc"),a=n.n(s);a.a},"56d7":function(t,e,n){"use strict";n.r(e);var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section container",attrs:{id:"app"}},[n("div",{staticClass:"columns row-reverse"},[n("div",{attrs:{id:"login"}},[null==t.store.myId?n("router-link",{staticClass:"button is-rounded",attrs:{to:"/login"}},[n("span",{staticClass:"icon is-small"},[n("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1),n("span",[t._v("Login")])]):n("button",{staticClass:"button is-rounded is-danger",on:{click:function(e){t.logout()}}},[n("span",{staticClass:"icon is-small"},[n("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1),n("span",[t._v(t._s(t.store.myId)+" Logout")])])],1),n("div",{staticClass:"column is-half"},[n("canvas-renderer")],1),n("div",{staticClass:"column"},[n("div",{staticClass:"tabs is-toggle is-toggle-rounded"},[n("ul",t._l(t.menu,function(e){return n("router-link",{key:e.url,attrs:{to:e.url,tag:"li"}},[n("a",[n("span",{staticClass:"icon is-small"},[n("font-awesome-icon",{attrs:{icon:e.icon}})],1),n("span",[t._v(t._s(e.name))])])])}),1)]),n("router-view")],1)])])},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"canvas"}})},r=[],l=n("5a89"),c=n("6397"),u=n.n(c),d=n("8acf"),p=n.n(d),m={name:"CanvasRenderer",data(){return{camera:null,scene:null,renderer:null,controls:null,mesh:null}},mounted(){this.init(),this.animate()},methods:{init:function(){let t=document.getElementById("canvas");this.camera=new l["PerspectiveCamera"](70,t.clientWidth/t.clientHeight,.01,10),this.camera.position.set(0,-2,2),this.scene=new l["Scene"];const e=new l["TorusGeometry"](1,.3,20,60),n=(new l["TextureLoader"]).load(p.a),s=new l["MeshBasicMaterial"]({map:n});this.mesh=new l["Mesh"](e,s),this.scene.add(this.mesh),this.renderer=new l["WebGLRenderer"]({antialias:!0,alpha:!0}),this.renderer.setSize(t.clientWidth,t.clientHeight),t.appendChild(this.renderer.domElement),this.controls=new u.a(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=1,this.controls.enableZoom=!0},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)}}},f=m,h=(n("94e9"),n("2877")),g=Object(h["a"])(f,i,r,!1,null,"4ae44fa4",null);g.options.__file="CanvasRenderer.vue";var v=g.exports,b=n("da6f"),_=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-wrapper",{attrs:{title:"Players"}},[n("table",{staticClass:"table is-hoverable is-narrow is-fullwidth"},[n("thead",[n("tr",[n("th",[t._v("name")]),n("th",{staticClass:"has-text-centered"},[t._v("\n          win rate\n        ")]),n("th",{staticClass:"has-text-centered"},[t._v("\n          status\n        ")])])]),n("tbody",t._l(t.players,function(e){return n("tr",{key:e.id,on:{click:function(n){t.invite(e.id)}}},[n("td",[t._v("\n          "+t._s(e.id)+"\n        ")]),n("td",{staticClass:"has-text-centered"},[t._v("\n          "+t._s(e.win)+"/"+t._s(e.win+e.loss)+"\n        ")]),n("td",{staticClass:"has-text-centered"},[0==e.status?n("span"):1==e.status?n("font-awesome-icon",{attrs:{icon:"eye"}}):n("font-awesome-icon",{attrs:{icon:"gamepad"}})],1)])}),0)])])},y=[],C=n("7fa4"),x=n("29b2"),P=n("bc3a"),k=n.n(P),I=k.a.create({withCredentials:!0,baseURL:"http://localhost:3000/"}),j={name:"Players",components:{ListWrapper:C["a"]},data(){return{players:[]}},mounted(){I.get("players").then(t=>{this.players=t}).catch(t=>{this.players=[{id:"ivan",win:19,loss:1,status:0},{id:"anna",win:1,loss:9,status:0},{id:"i_am_just_watching",win:0,loss:0,status:1},{id:"i_am_busy",win:0,loss:0,status:10},{id:"wassup_player1",win:19,loss:1,status:0}]})},methods:{invite(t){console.log("invite event for player",t),x["a"].emit("invite",{id:t},(t,e)=>{e&&Q.push({name:"PvP"})})}}},L=j,O=Object(h["a"])(L,w,y,!1,null,null,null);O.options.__file="Players.vue";var E=O.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-wrapper",{attrs:{title:"Games"}},[n("table",{staticClass:"table is-hoverable is-narrow is-fullwidth"},[n("thead",[n("tr",[n("th",[t._v("players")]),n("th",{staticClass:"has-text-centered"},[t._v("\n          move\n        ")]),n("th",{staticClass:"has-text-centered"},[t._v("\n          model type\n        ")])])]),n("tbody",t._l(t.games,function(e){return n("tr",{key:e.gameId,ref:"game_".concat(e.gameId),refInFor:!0},[n("td",[t._v(t._s(e.white)+" vs "+t._s(e.black))]),n("td",{staticClass:"has-text-centered"},[t._v("\n          "+t._s(e.move)+"\n        ")]),n("td",{staticClass:"has-text-centered"},[t._v("\n          "+t._s(e.type)+"\n        ")])])}),0)])])},M=[],S={name:"Games",components:{ListWrapper:C["a"]},data(){return{games:[]}},mounted(){I.get("getGames").then(t=>{this.games=t}).catch(t=>{console.log("games not fetched: ",t)})}},W=S,A=Object(h["a"])(W,$,M,!1,null,null,null);A.options.__file="Games.vue";var G=A.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-wrapper",{attrs:{title:"About"}},[n("p",[t._v("\n    This is an abstract strategy 3d board game for two players,\n    in which the aim is to surround more territory than the opponent.\n  ")]),n("br"),n("p",[t._v("Frontend by Munrocket")]),n("p",[t._v("Backend by Gleb-Kulchitskiy")])])},T=[],F={name:"About",components:{ListWrapper:C["a"]}},R=F,q=Object(h["a"])(R,N,T,!1,null,null,null);q.options.__file="About.vue";var B=q.exports,H=n("293a"),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-wrapper",{attrs:{title:"Login"}},[n("form",[n("div",{staticClass:"field-body field"},[n("div",{staticClass:"field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.login,expression:"form.login"}],staticClass:"input",attrs:{type:"text",placeholder:"Login"},domProps:{value:t.form.login},on:{input:function(e){e.target.composing||t.$set(t.form,"login",e.target.value)}}})]),n("div",{staticClass:"field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})])]),n("div",{staticClass:"field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),n("div",{staticClass:"field-body field"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:function(e){t.login()}}},[t._v("\n          Sign in\n        ")])]),n("div",{staticClass:"control little-margin-left"},[n("button",{staticClass:"button",on:{click:function(e){t.singup()}}},[t._v("\n          Sign up\n        ")])]),n("div",{staticClass:"field-label"}),n("a",{staticClass:"button is-rounded",attrs:{href:"http://localhost:3000/auth/facebook"}},[n("font-awesome-icon",{attrs:{icon:["fab","facebook"]}})],1),n("a",{staticClass:"button is-rounded",attrs:{href:"http://localhost:3000/auth/twitter"}},[n("font-awesome-icon",{attrs:{icon:["fab","twitter"]}})],1),n("button",{staticClass:"button is-rounded",on:{click:function(e){t.google()}}},[n("font-awesome-icon",{attrs:{icon:["fab","google"]}})],1),n("button",{staticClass:"button is-rounded",on:{click:function(e){t.github()}}},[n("font-awesome-icon",{attrs:{icon:["fab","github"]}})],1)])])])},V=[],z={name:"Login",components:{ListWrapper:C["a"]},data(){return{form:{}}},methods:{login(){I.post("auth/login",{email:this.form.email,password:this.form.password}).then(t=>{console.log(t.data.user.name,"is loggined."),b["a"].myId=t.data.user.name,Q.push({name:"Players"})}).catch(t=>console.log("login error",t,this.form.email,this.form.password))},singup(){I.post("auth/singup",{login:this.form.login,email:this.form.email,password:this.form.password,passwordConfirm:this.form.password}).then(t=>{b["a"].myId=t.user}).catch(t=>{console.log("singup error",t,this.form.login,this.form.email,this.form.password)})},google(){I.post("auth/google").then(console.log("google auth ok")).catch(console.log("google auth error"))},github(){I.post("auth/github").then(console.log("github auth ok")).catch(console.log("github auth error"))}}},D=z,K=(n("d6db"),Object(h["a"])(D,J,V,!1,null,null,null));K.options.__file="Login.vue";var U=K.exports,Z=n("3874");s["a"].use(_["a"]);var Q=new _["a"]({linkActiveClass:"is-active",linkExactActiveClass:"is-exact-active",routes:[{path:"/",redirect:"/players"},{path:"/players",name:"Players",component:E},{path:"/games",name:"Games",component:G},{path:"/chat",name:"Chat",component:H["default"],function(){return Promise.resolve().then(n.bind(null,"293a"))}},{path:"/about",name:"About",component:B},{path:"/login",name:"Login",component:U},{path:"/pvp",name:"PvP",component:Z["default"],function(){return Promise.resolve().then(n.bind(null,"3874"))}}]}),X={name:"App",components:{CanvasRenderer:v},data(){return{showLogin:!0,menu:[{url:"/players",name:"Players",icon:"users"},{url:"/games",name:"Games",icon:"gamepad"},{url:"/chat",name:"Chat",icon:"comment-dots"},{url:"/about",name:"About",icon:"info-circle"}],store:b["a"]}},methods:{logout(){I.get("auth/logout").then(t=>{console.log(b["a"].myId,"is logout."),b["a"].myId=null}).catch(t=>{console.log(t)})}}},Y=X,tt=(n("5c0b"),Object(h["a"])(Y,a,o,!1,null,null,null));tt.options.__file="App.vue";var et=tt.exports,nt=n("ad3d"),st=n("ecee"),at=n("c074"),ot=n("f2d1");n("a347");s["a"].config.productionTip=!0,st["c"].add(at["f"],at["c"],at["a"],at["d"],at["b"],at["e"],ot["a"],ot["d"],ot["c"],ot["b"]),s["a"].component("font-awesome-icon",nt["a"]),new s["a"]({router:Q,render:function(t){return t(et)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("5e27"),a=n.n(s);a.a},"5e27":function(t,e,n){},"7edc":function(t,e,n){},"7fa4":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("article",{staticClass:"media"},[t.title?n("h1",{staticClass:"title"},[t._v("\n      "+t._s(t.title)+"\n    ")]):t._e(),n("div",[t._t("default")],2)])])},a=[],o={name:"ListWrapper",props:{title:{type:String,required:!0}}},i=o,r=n("2877"),l=Object(r["a"])(i,s,a,!1,null,null,null);l.options.__file="ListWrapper.vue";e["a"]=l.exports},"8acf":function(t,e,n){t.exports=n.p+"img/texture.191df4c3.jpg"},"94e9":function(t,e,n){"use strict";var s=n("ff46"),a=n.n(s);a.a},a347:function(t,e,n){},a9e7:function(t,e,n){},d6db:function(t,e,n){"use strict";var s=n("a9e7"),a=n.n(s);a.a},da6f:function(t,e,n){"use strict";e["a"]={myId:null,opponentId:null}},ff46:function(t,e,n){}});
//# sourceMappingURL=app.f48a30cf.js.map